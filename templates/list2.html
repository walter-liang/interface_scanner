<!DOCTYPE html>
<html lang="zh-CN">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
      <meta name="description" content="">
      <meta name="author" content="">
      <link rel="icon" href="../../favicon.ico">

      <title>Guest Manage System</title>

      <!-- Bootstrap core CSS -->
      <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
      <link href="//cdn.bootcss.com/bootstrap-switch/4.0.0-alpha.1/css/bootstrap-switch.min.css" rel="stylesheet">
      <!-- Custom styles for this template -->
      <link href="//v3.bootcss.com/examples/theme/theme.css" rel="stylesheet">
  </head>

  <body role="document">

      <!-- 导航栏 -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">接口自动化测试平台</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
{#          <ul class="nav navbar-nav">#}
{#            <li class="active"><a href="#">接口列表</a></li>#}
{#          </ul>#}
          <ul class="nav navbar-nav navbar-right">
           <li><a href="#">{{user}}</a></li>
           <li><a href="#">退出</a></li>
         </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>




 <div class="container theme-showcase" role="main">

    <div class="panel-body">
        <div class="list-op" id="list_op">
            <button type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
            </button>
            <button type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
            </button>
            <button type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
            </button>
            <button id="verify_interface" type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>验证选中的接口
            </button>
        </div>
    </div>

      <!--发布会表单-->
      <div class="page-header">
        <div id="navbar" class="navbar-collapse collapse">
          <form class="navbar-form" method="get" action="/search_name/">
            <div class="form-group">
              <input name="name" type="text" placeholder="名称" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">搜索</button>
          </form>
        </div><!--/.navbar-collapse -->
      </div>

      <div class="row">
        <div class="table-responsive">
          <table class="table table-condensed" style="word-break:break-all; word-wrap:break-all;">
            <thead>
              <tr>
                <th>接口编号</th>
                <th>接口名称</th>
                <th  width="30%">URL地址</th>
                <th>代理地址</th>
                <th>post参数</th>
                <th  width="30%">预期响应</th>
                <th>请求方式</th>
                <th>是否有效</th>
              </tr>
            </thead>
            <tbody>
              {% for interface in  interface_list.object_list %}
                <tr>
                  <td>{{ interface.id }}</td>
                  <td>{{ interface.name }}</td>
                  <td>
                      {{ interface.theurl}}</td>
                  <td>{{ interface.proxy}}</td>
                  <td>{{ interface.postdata }}</td>
                  <td>
                      {{ interface.expection }}</td>
                  <td>{{ interface.method }}</td>
                  <td>{% if interface.station %}
                      <div class="switch switch-mini"  id="mySwitch">
                        <input type="checkbox" checked  data-on-text="成功" data-off-text="失败"/>
                      </div>
                      {% else %}
                      <div class="switch switch-mini"  id="mySwitch">
                        <input type="checkbox"  data-on-text="成功" data-off-text="失败"/>
                      </div>
                      {% endif %}
                  </td>

                </tr>
             {% endfor %}
            </tbody>
          </table>
        </div>

      <div class="pageturn">
            <ul class="pagination">
                {% if interface_list.has_previous %}
                <li class="long"><a href="?{{ interface_list.previous_page_number.querystring }}">上一页</a></li>
                {% endif %}


                {% for page in interface_list.pages %}
                    {% if page %}
                        {% ifequal page interface_list.number %}
                            <li class="active"><a href="?{{ page.querystring }}">{{ page }}</a></li>
                        {% else %}
                            <li><a href="?{{ page.querystring }}" class="page">{{ page }}</a></li>
                        {% endifequal %}
                    {% else %}
                        <li class="none"><a href="">...</a></li>
                    {% endif %}
                {% endfor %}
                {% if interface_list.has_next %}
                    <li class="long"><a href="?{{ interface_list.next_page_number.querystring }}">下一页</a></li>
                {% endif %}

            </ul>
        </div>


      </div>


    <div class="container theme-showcase" role="main">

        <div class="page-header">
        </div>
        <footer class="footer">
          <p>&copy; Company 2017, Author:LKJ</p>
        </footer>

    </div> <!-- /container -->

  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="//cdn.bootcss.com/bootstrap-switch/4.0.0-alpha.1/js/bootstrap-switch.min.js"></script>
     <!--实现checkbox的单选全选功能-->
     <script>
        $(function(){
            function initTableCheckbox() {
                var $thr = $('table thead tr');
                var $checkAllTh = $('<th><input type="checkbox" id="checkAll" name="checkAll" /></th>');
                /*将全选/反选复选框添加到表头最前，即增加一列*/
                $thr.prepend($checkAllTh);
                /*“全选/反选”复选框*/
                var $checkAll = $thr.find('input');
                $checkAll.click(function(event){
                    /*将所有行的选中状态设成全选框的选中状态*/
                    $tbr.find('input').prop('checked',$(this).prop('checked'));
                    /*并调整所有选中行的CSS样式*/
                    if ($(this).prop('checked')) {
                        $tbr.find('input').parent().parent().addClass('warning');
                    } else{
                        $tbr.find('input').parent().parent().removeClass('warning');
                    }
                    /*阻止向上冒泡，以防再次触发点击操作*/
                    event.stopPropagation();
                });
                /*点击全选框所在单元格时也触发全选框的点击操作*/
                $checkAllTh.click(function(){
                    $(this).find('input').click();
                });
                var $tbr = $('table tbody tr');
                var $checkItemTd = $('<td><input type="checkbox" name="checkItem" /></td>');
                /*每一行都在最前面插入一个选中复选框的单元格*/
                $tbr.prepend($checkItemTd);
                /*点击每一行的选中复选框时*/
                $tbr.find('input').click(function(event){
                    /*调整选中行的CSS样式*/
                    $(this).parent().parent().toggleClass('warning');
                    /*如果已经被选中行的行数等于表格的数据行数，将全选框设为选中状态，否则设为未选中状态*/
                    $checkAll.prop('checked',$tbr.find('input:checked').length == $tbr.length ? true : false);
                    /*阻止向上冒泡，以防再次触发点击操作*/
                    event.stopPropagation();
                });
                /*点击每一行时也触发该行的选中操作*/
{#                $tbr.click(function(){#}
{#                    $(this).find('input').click();#}
{#                });#}
            }
            initTableCheckbox();
        });
        </script>

     <!--获取选中的id功能-->
     <script language="javascript">
    function getTDtext()
    {
    var rows = document.getElementById("test_table").rows;
    var a = document.getElementsByName("r");
    //var states = "";
    var  table = document.getElementById("test_table");
    for(var i=0;i<a.length;i++)
    {
    if(a[i].checked){
    var row = a[i].parentElement.parentElement.rowIndex;
    //states += rows[row].cells[1].innerHTML+";";
      alert(a[i].value);
      alert(rows[row].cells[1].innerHTML);
    }
    }
    }
    </script>

     <!--状态切换-->
     <script type="text/javascript">
            $(function(){
                $('#mySwitch input').bootstrapSwitch();
            })

     </script>

 </body>

</html>
